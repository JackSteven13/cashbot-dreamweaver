
# Force HTTPS
http://*  https://:splat 301!

# Redirection prioritaire .fr vers .io
https://streamgenius.fr/* https://streamgenius.io/:splat 301!
https://www.streamgenius.fr/* https://streamgenius.io/:splat 301!

# Redirection www vers non-www
https://www.streamgenius.io/* https://streamgenius.io/:splat 301!

# Routes CRUCIALES pour les callbacks d'authentification Supabase (priorité maximale)
/auth/callback/* /index.html 200!
/auth/* /index.html 200!
/auth/v1/* /index.html 200!
/api/auth/* /index.html 200!
/login/* /index.html 200!
/login /index.html 200!
/register /index.html 200!

# CRUCIAL: Traitement spécial des pages principales
/dashboard/* /index.html 200!
/dashboard /index.html 200!

# Redirections pour les API Supabase avec support pour domaine personnalisé
/.supabase/* https://cfjibduhagxiwqkiyhqd.supabase.co/:splat 200
/.rest/* https://cfjibduhagxiwqkiyhqd.supabase.co/rest/:splat 200
/.auth/* https://cfjibduhagxiwqkiyhqd.supabase.co/auth/:splat 200

# SPA fallback pour toutes les autres routes
/* /index.html 200
